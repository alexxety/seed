---
name: data-migration
description: 'Перенос данных из legacy (shopId в одной схеме) → schema-per-tenant (t_{id}); временный read-only режим.'
tags: ['migrations', 'data']
---

# Что делать

1. Скрипт migrateLegacyToTenants.ts:
   - для каждого старого shop → создать tenant (если нет),
   - перенести товары/клиентов/заказы в t\_{id},
   - протоколировать итоги.
2. Флаг LEGACY_READONLY: старые таблицы доступны только для чтения до завершения миграции.
3. Отчёт: сколько записей перенесено/пропущено.

# DoD

Данные перенесены; приложение читает из t\_{id}; откат не нужен.
